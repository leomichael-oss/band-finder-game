<!doctype html>
<html lang="en">
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <title>Band Finder Game</title>
    <style>
      :root {
        --bg: #0b0f14;
        --panel: #121823;
        --accent: #ffb200;
        --accent-2: #4de0ff;
        --text: #e8f0ff;
        --muted: #9fb2cc;
        --bad: #ff5e5e;
        --good: #6ee7a8;
      }

      * { box-sizing: border-box; }

      body {
        margin: 0;
        font-family: "Space Grotesk", "IBM Plex Sans", "Segoe UI", sans-serif;
        background: radial-gradient(1200px 800px at 10% 10%, #152033 0%, var(--bg) 50%, #070a0f 100%);
        color: var(--text);
        min-height: 100vh;
        display: grid;
        place-items: center;
        padding: 24px;
      }

      .wrap {
        width: min(920px, 100%);
      }

      .header {
        display: flex;
        align-items: center;
        justify-content: space-between;
        gap: 16px;
        margin-bottom: 20px;
      }

      .title {
        font-size: clamp(28px, 4vw, 40px);
        letter-spacing: 0.5px;
      }

      .subtitle {
        color: var(--muted);
        margin-top: 6px;
        font-size: 15px;
      }

      .panel {
        background: linear-gradient(160deg, #141b27 0%, #0f141e 100%);
        border: 1px solid #1f2b3d;
        border-radius: 16px;
        padding: 24px;
        box-shadow: 0 20px 60px rgba(0, 0, 0, 0.45);
      }

      .band-card {
        display: grid;
        gap: 16px;
        padding: 24px;
        border-radius: 14px;
        border: 1px solid #22314a;
        background: linear-gradient(135deg, #151e2d 0%, #101826 100%);
      }

      .band-name {
        font-size: clamp(30px, 5vw, 46px);
        font-weight: 700;
        letter-spacing: 0.8px;
      }

      .controls {
        display: grid;
        grid-template-columns: repeat(auto-fit, minmax(150px, 1fr));
        gap: 12px;
        margin-top: 20px;
      }

      button {
        border: none;
        border-radius: 12px;
        padding: 14px 12px;
        font-size: 14px;
        font-weight: 600;
        letter-spacing: 0.3px;
        cursor: pointer;
        color: #0c1017;
        background: #e5edf7;
        transition: transform 0.08s ease, box-shadow 0.2s ease, background 0.2s ease;
      }

      button:hover { transform: translateY(-2px); }

      .love { background: linear-gradient(135deg, #ffc46b, var(--accent)); }
      .like { background: linear-gradient(135deg, #9cf4ff, var(--accent-2)); }
      .dont { background: linear-gradient(135deg, #c3cedf, #869bb6); }
      .hate { background: linear-gradient(135deg, #ff8f8f, var(--bad)); }
      .never { background: linear-gradient(135deg, #c8fbdc, var(--good)); }

      .status {
        margin-top: 18px;
        display: flex;
        align-items: center;
        justify-content: space-between;
        color: var(--muted);
        font-size: 13px;
      }

      .meter {
        height: 8px;
        background: #1a2435;
        border-radius: 999px;
        overflow: hidden;
        border: 1px solid #22314a;
        flex: 1;
        margin-left: 12px;
      }

      .meter > span {
        display: block;
        height: 100%;
        background: linear-gradient(90deg, #69f0ff, #ffd166);
        width: 0%;
        transition: width 0.3s ease;
      }

      .results {
        margin-top: 24px;
        display: none;
        gap: 14px;
      }

      .results.active { display: grid; }

      .rec {
        padding: 16px;
        border-radius: 12px;
        border: 1px solid #22314a;
        background: rgba(14, 20, 32, 0.85);
      }

      .rec h4 {
        margin: 0 0 6px 0;
        font-size: 18px;
      }

      .rec p {
        margin: 0;
        color: var(--muted);
        font-size: 13px;
      }

      .footer {
        margin-top: 18px;
        display: flex;
        gap: 10px;
        flex-wrap: wrap;
      }

      .ghost {
        background: transparent;
        color: var(--text);
        border: 1px solid #2a3c56;
      }

      @media (max-width: 640px) {
        .header { flex-direction: column; align-items: flex-start; }
        .status { flex-direction: column; align-items: flex-start; gap: 8px; }
        .meter { margin-left: 0; width: 100%; }
      }
    </style>
  </head>
  <body>
    <div class="wrap">
      <div class="header">
        <div>
          <div class="title">Band Finder Game</div>
          <div class="subtitle">Rate bands. We learn. We recommend the “never heard” ones you’ll love.</div>
        </div>
        <div id="scoreBox" class="subtitle"></div>
      </div>

      <div class="panel">
        <div class="band-card">
          <div id="bandName" class="band-name">Loading…</div>
        </div>

        <div class="controls">
          <button class="love" data-rating="love">LOVE</button>
          <button class="like" data-rating="like">LIKE</button>
          <button class="dont" data-rating="dont">DON'T LIKE</button>
          <button class="hate" data-rating="hate">HATE</button>
          <button class="never" data-rating="never">NEVER HEARD OF</button>
        </div>

        <div class="status">
          <div id="progressText">0 of 0 rated</div>
          <div class="meter"><span id="meterFill"></span></div>
        </div>

        <div class="results" id="results"></div>

        <div class="footer">
          <button id="finishBtn" class="ghost">Finish & Recommend</button>
          <button id="resetBtn" class="ghost">Start Over</button>
        </div>
      </div>
    </div>

    <script>
      const bands = [
        { name: "Radiohead", tags: ["alternative", "art rock", "experimental"] },
        { name: "The National", tags: ["indie", "baroque", "melancholic"] },
        { name: "Tame Impala", tags: ["psychedelic", "indie", "pop"] },
        { name: "Arctic Monkeys", tags: ["indie rock", "garage", "brit"] },
        { name: "Phoebe Bridgers", tags: ["indie", "folk", "singer-songwriter"] },
        { name: "Mitski", tags: ["indie", "art pop", "emo"] },
        { name: "King Gizzard & the Lizard Wizard", tags: ["psychedelic", "garage", "prog"] },
        { name: "Fleet Foxes", tags: ["folk", "baroque", "harmony"] },
        { name: "The War on Drugs", tags: ["indie", "heartland", "shoegaze"] },
        { name: "Yeah Yeah Yeahs", tags: ["indie rock", "post-punk", "dance"] },
        { name: "St. Vincent", tags: ["art rock", "indie", "electro"] },
        { name: "Sufjan Stevens", tags: ["indie", "folk", "chamber"] },
        { name: "Big Thief", tags: ["indie", "folk", "lo-fi"] },
        { name: "Beach House", tags: ["dream pop", "shoegaze", "indie"] },
        { name: "Vampire Weekend", tags: ["indie", "afropop", "baroque"] },
        { name: "The 1975", tags: ["pop", "indie", "synth"] },
        { name: "The Strokes", tags: ["garage", "indie rock", "nyc"] },
        { name: "Interpol", tags: ["post-punk", "indie", "dark"] },
        { name: "Foals", tags: ["indie", "math", "dance"] },
        { name: "Arcade Fire", tags: ["indie", "anthemic", "art rock"] },
        { name: "Bon Iver", tags: ["indie", "folk", "ambient"] },
        { name: "LCD Soundsystem", tags: ["dance", "indie", "electronic"] },
        { name: "The xx", tags: ["indie", "minimal", "electronic"] },
        { name: "CHVRCHES", tags: ["synth", "pop", "electronic"] },
        { name: "Alvvays", tags: ["indie", "jangle", "dream pop"] },
        { name: "Japanese Breakfast", tags: ["indie", "dream pop", "singer-songwriter"] },
        { name: "Wolf Alice", tags: ["indie", "grunge", "brit"] },
        { name: "Fontaines D.C.", tags: ["post-punk", "indie", "irish"] },
        { name: "Idles", tags: ["post-punk", "punk", "loud"] },
        { name: "Dry Cleaning", tags: ["post-punk", "spoken", "indie"] },
        { name: "Turnstile", tags: ["hardcore", "punk", "melodic"] },
        { name: "The Smile", tags: ["art rock", "experimental", "indie"] },
        { name: "Black Country, New Road", tags: ["post-rock", "art rock", "chamber"] },
        { name: "Khruangbin", tags: ["psychedelic", "funk", "global"] },
        { name: "Parcels", tags: ["funk", "disco", "indie"] },
        { name: "Cigarettes After Sex", tags: ["dream pop", "slowcore", "romantic"] },
        { name: "The Cure", tags: ["goth", "post-punk", "new wave"] },
        { name: "Depeche Mode", tags: ["synth", "new wave", "dark"] },
        { name: "Joy Division", tags: ["post-punk", "dark", "classic"] },
        { name: "Talking Heads", tags: ["art rock", "new wave", "funk"] },
        { name: "Pixies", tags: ["alternative", "indie", "loud-quiet"] },
        { name: "Sonic Youth", tags: ["noise", "alternative", "art rock"] },
        { name: "My Bloody Valentine", tags: ["shoegaze", "noise", "dream pop"] },
        { name: "Slowdive", tags: ["shoegaze", "dream pop", "ethereal"] },
        { name: "Cocteau Twins", tags: ["dream pop", "ethereal", "classic"] },
        { name: "The Smiths", tags: ["indie", "jangle", "classic"] },
        { name: "The Jesus and Mary Chain", tags: ["noise", "shoegaze", "indie"] },
        { name: "Yo La Tengo", tags: ["indie", "experimental", "lo-fi"] },
        { name: "Animal Collective", tags: ["experimental", "psychedelic", "indie"] },
        { name: "Grizzly Bear", tags: ["indie", "art rock", "harmony"] },
        { name: "The Postal Service", tags: ["indie", "electronic", "nostalgic"] },
        { name: "M83", tags: ["electronic", "dream pop", "anthemic"] },
        { name: "The Flaming Lips", tags: ["psychedelic", "alternative", "art rock"] },
        { name: "The Black Keys", tags: ["garage", "blues", "rock"] },
        { name: "The White Stripes", tags: ["garage", "blues", "rock"] },
        { name: "Queens of the Stone Age", tags: ["desert rock", "alternative", "heavy"] },
        { name: "Muse", tags: ["alt rock", "arena", "dramatic"] },
        { name: "The Killers", tags: ["indie", "arena", "synth"] },
        { name: "The Shins", tags: ["indie", "jangly", "warm"] },
        { name: "MGMT", tags: ["psychedelic", "pop", "indie"] },
        { name: "Washed Out", tags: ["chillwave", "dream pop", "electronic"] },
        { name: "Car Seat Headrest", tags: ["indie", "lo-fi", "rock"] },
        { name: "The Avalanches", tags: ["electronic", "sample", "psychedelic"] },
        { name: "Unknown Mortal Orchestra", tags: ["psychedelic", "indie", "funk"] },
        { name: "The Paper Kites", tags: ["folk", "indie", "soft"] },
        { name: "Low", tags: ["slowcore", "indie", "minimal"] },
        { name: "Sigur Rós", tags: ["post-rock", "ambient", "icelandic"] },
        { name: "Explosions in the Sky", tags: ["post-rock", "instrumental", "cinematic"] },
        { name: "Godspeed You! Black Emperor", tags: ["post-rock", "experimental", "epic"] }
      ];

      const ratingWeights = {
        love: 2.0,
        like: 1.0,
        dont: -0.6,
        hate: -1.4,
        never: 0.0
      };

      const state = {
        index: 0,
        order: [],
        ratings: new Map(),
        tagScores: new Map(),
        neverHeard: new Set(),
        ratedCount: 0
      };

      const bandName = document.getElementById("bandName");
      const progressText = document.getElementById("progressText");
      const meterFill = document.getElementById("meterFill");
      const results = document.getElementById("results");
      const finishBtn = document.getElementById("finishBtn");
      const resetBtn = document.getElementById("resetBtn");
      const scoreBox = document.getElementById("scoreBox");

      function shuffle(list) {
        const arr = [...list];
        for (let i = arr.length - 1; i > 0; i -= 1) {
          const j = Math.floor(Math.random() * (i + 1));
          [arr[i], arr[j]] = [arr[j], arr[i]];
        }
        return arr;
      }

      function init() {
        state.order = shuffle(bands.map((_, i) => i));
        state.index = 0;
        state.ratings.clear();
        state.tagScores.clear();
        state.neverHeard.clear();
        state.ratedCount = 0;
        results.classList.remove("active");
        results.innerHTML = "";
        nextBand();
        updateStatus();
      }

      function nextBand() {
        if (state.index >= state.order.length) {
          showRecommendations();
          return;
        }
        const band = bands[state.order[state.index]];
        bandName.textContent = band.name;
      }

      function updateStatus() {
        progressText.textContent = `${state.ratedCount} of ${bands.length} rated`;
        const pct = Math.round((state.ratedCount / bands.length) * 100);
        meterFill.style.width = `${pct}%`;
        scoreBox.textContent = `Known: ${bands.length - state.neverHeard.size} • Never heard: ${state.neverHeard.size}`;
      }

      function applyRating(band, rating) {
        const weight = ratingWeights[rating];
        for (const tag of band.tags) {
          const current = state.tagScores.get(tag) ?? 0;
          state.tagScores.set(tag, current + weight);
        }
      }

      function handleRating(rating) {
        if (state.index >= state.order.length) return;
        const band = bands[state.order[state.index]];
        state.ratings.set(band.name, rating);
        if (rating === "never") {
          state.neverHeard.add(band.name);
        } else {
          state.neverHeard.delete(band.name);
        }
        applyRating(band, rating);
        state.index += 1;
        state.ratedCount += 1;
        updateStatus();
        nextBand();
      }

      function scoreBand(band) {
        let score = 0;
        for (const tag of band.tags) {
          score += state.tagScores.get(tag) ?? 0;
        }
        return score / band.tags.length;
      }

      function showRecommendations() {
        const neverList = bands.filter(b => state.neverHeard.has(b.name));
        const scored = neverList
          .map(b => ({ ...b, score: scoreBand(b) }))
          .sort((a, b) => b.score - a.score);

        results.classList.add("active");
        results.innerHTML = "";

        const header = document.createElement("div");
        header.className = "rec";
        const totalNever = neverList.length;
        const hasRatings = state.tagScores.size > 0;
        header.innerHTML = `
          <h4>Recommendations</h4>
          <p>${totalNever === 0 ? "You rated every band." : `From ${totalNever} never-heard bands.`} ${hasRatings ? "Sorted by your taste profile." : "No taste profile yet — showing random picks."}</p>
        `;
        results.appendChild(header);

        const picks = (hasRatings ? scored : shuffle(neverList).map(b => ({ ...b, score: 0 }))).slice(0, 8);

        if (picks.length === 0) {
          const empty = document.createElement("div");
          empty.className = "rec";
          empty.innerHTML = "<h4>No picks left</h4><p>Mark a few bands as “Never heard of” to get recommendations.</p>";
          results.appendChild(empty);
          return;
        }

        for (const band of picks) {
          const item = document.createElement("div");
          item.className = "rec";
          const tagLine = band.tags.join(" • ");
          const scoreText = hasRatings ? `Match score: ${band.score.toFixed(2)}` : "";
          item.innerHTML = `<h4>${band.name}</h4><p>${tagLine}${scoreText ? ` — ${scoreText}` : ""}</p>`;
          results.appendChild(item);
        }
      }

      document.querySelectorAll("button[data-rating]").forEach(btn => {
        btn.addEventListener("click", () => handleRating(btn.dataset.rating));
      });

      finishBtn.addEventListener("click", showRecommendations);
      resetBtn.addEventListener("click", init);

      init();
    </script>
  </body>
</html>

